{% extends "template.njk" %}

{% import "_pattern_macros/navigation_card.njk" as navcard %}
{% import "_pattern_macros/general_card.njk" as generalcard %}

{% set title = "Quiz Test" %}

{% block main %}

  <section class="breadcrumbs">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb my-2">
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Home</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Care, support and health</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Health and wellbeing</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Healthy lifestyles</a></li>
          <li class="breadcrumb-item"><a href="{{ '/help-to-cut-back-on-your-drinking' | url }}">Help to cut back on your drinking</a></li>
          <li class="breadcrumb-item active">Alcohol quiz</li>
        </ol>
      </nav>
    </div>
  </section>

    <section class="section_stage_theme">
    <div class="container">
      <h1 class="h2">Help to cut back on your drinking</h1>
      <p class="lead col-12 col-lg-6">If you're not sure whether you're drinking too much alcohol, or if you want to change your drinking, the step-by-step guidance below will help you.</p>
    </div>
  </section>

  <section>
    <div class="container">
      <p class="question-number">Question 1 of 3</p>
      <h2 class="h3 question-title">How frequently do you drink alcohol?</h2>
      <form>
        <div class="form-check radio-form">
          <input class="form-check-input" type="radio" name="questionOne" value="Answer1" id="flexRadioDefault1">
          <label class="form-check-label" for="flexRadioDefault1">
            Never or less than once a year
          </label>
        </div>
        <div class="form-check radio-form">
          <input class="form-check-input" type="radio" name="questionOne" value="Answer2" id="flexRadioDefault2">
          <label class="form-check-label" for="flexRadioDefault2">
            Less than or around once a month
          </label>
        </div>
        <div class="form-check radio-form">
          <input class="form-check-input" type="radio" name="questionOne" value="Answer3" id="flexRadioDefault3">
          <label class="form-check-label" for="flexRadioDefault3">
            Multiple times a month, maybe even once a week
          </label>
        </div>
        <div class="form-check radio-form">
          <input class="form-check-input" type="radio" name="questionOne" value="Answer4" id="flexRadioDefault4">
          <label class="form-check-label" for="flexRadioDefault4">
            Every day, sometimes multiple times a day
          </label>
        </div>
        <input type="button" class="btn btn-primary btn-lg my-3" value="Submit" id="submit" onclick="submitForm(this.form.questionOne);"></input>
      </form>

      <script>

        {# 
        
        https://www.sitepoint.com/get-url-parameters-with-javascript/ 
        
        http://www.java2s.com/Tutorials/Javascript/Javascript_Form_How_to/Select/Loop_through_each_Radio_Button_and_get_the_selected_ones.htm

        https://stackoverflow.com/questions/33249166/javascript-using-cookie-to-pass-variables-to-another-page
        

        #}

        {# var today = new Date();
        var expiry = new Date(today.getTime() + 2 * 24 * 3600 * 1000); // plus 2 days

        function setCookie(name, value) {
          document.cookie = name + "=" + escape(value) + "; path=/; expires=" + expiry.toGMTString();
        }
        function putCookie(form) {
          setCookie("formResult", form[0].usrname.value);
          return true;
        } #}

        function submitForm(radioObject) {
          let selectedInput = null;

          for (var i = 0; i < radioObject.length; i++) {
            if (radioObject[i].checked) {
              value = radioObject[i].value;
            }
          }

          console.log(`value = ${value}`);
          let hour = 1/24;
          setCookie('q1answer', value, hour);

          window.location.href = "{{ '/alcohol-quiz/results' | url }}";
        }

        function setCookie(cname, cvalue, exdays) {
          const d = new Date();
          d.setTime(d.getTime() + (exdays*24*60*60*1000));
          let expires = "expires="+ d.toUTCString();
          document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
        }
      </script>
    </div>
  </section>
{% endblock %}
