{% extends "template.njk" %}

{% import "_pattern_macros/navigation_card.njk" as navcard %}
{% import "_pattern_macros/general_card.njk" as generalcard %}

{% set title = "Alcohol goals and plan" %}

{% block main %}

  <section class="breadcrumbs">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb my-2">
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Home</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Care, support and health</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Health and wellbeing</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Healthy lifestyles</a></li>
          <li class="breadcrumb-item"><a href="{{ '/help-to-cut-back-on-your-drinking/' | url }}">Help to cut back on your drinking</a></li>
          <li class="breadcrumb-item active">Alcohol goals and plan</li>
        </ol>
      </nav>
    </div>
  </section>

  <section class="section_stage_theme">
    <div class="container">
      <h1 class="h2">Alcohol goals and plan</h1>
    </div>
  </section>

  <section>
    <div class="container">
      <div class="col-12 col-md-9">
        <h2 class="h3 mb-2">Privacy</h2>
        <p>Before you complete this form please read <a href="{{ '/' | url }}">Norfolk County Council privacy notice</a></p>
        <div class="form-check pb-4 pt-2" id="privacyFormOne">
          <input class="form-check-input" type="checkbox" name="privacyQuestionOne" value="privacyAnswer1" id="privacyCheckbox1">
          <label class="form-check-label" for="privacyCheckbox1">
            Tick to confirm that you have read our privacy notice
          </label>
        </div>
      
        <h2 class="h3 mb-2">Can you help us with our research? (optional)</h2>
        <p>We'd like to review your data and send you a follow-up survey after 4 weeks.</p>
        <p>Any data you share will only be reviewed by our design team.</p>
        <div class="form-check pt-2" id="privacyFormTwo">
          <input class="form-check-input" type="checkbox" name="privacyQuestionTwo" value="privacyAnswer2" id="privacyCheckbox2">
          <label class="form-check-label" for="privacyCheckbox2">
            If you are happy for us to collect data from this form, please tick this box.
          </label>
        </div>
        <div class="form-check pb-4 pt-2" id="privacyFormThree">
          <input class="form-check-input" type="checkbox" name="privacyQuestionThree" value="privacyAnswer3" id="privacyCheckbox3">
          <label class="form-check-label" for="privacyCheckbox3">
            If you would be happy to receive a survey, please tick this box
          </label>
        </div>

        <div class="alert alert-success green-info-box" role="alert">
          <svg width="39" height="34" viewBox="0 0 39 34" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M16.7165 17.4998C19.3832 11.6332 26.2998 9.04984 32.1665 11.7165C38.0332 14.3832 40.6165 21.2998 37.9498 27.1665C36.0665 31.3332 31.9165 33.9998 27.3332 33.9998C22.8332 33.9998 18.7165 31.3998 16.7832 27.3332H0.666504V23.9998C0.766504 22.0998 2.0665 20.5498 4.5665 19.2998C7.0665 18.0498 10.1998 17.3998 13.9998 17.3332C14.9498 17.3332 15.8498 17.4165 16.7165 17.4998ZM13.9998 0.666504C15.8665 0.716504 17.4332 1.3665 18.6832 2.6165C19.9332 3.8665 20.5498 5.43317 20.5498 7.33317C20.5498 9.23317 19.9332 10.7998 18.6832 12.0498C17.4332 13.2998 15.8665 13.9165 13.9998 13.9165C12.1332 13.9165 10.5665 13.2998 9.3165 12.0498C8.0665 10.7998 7.44984 9.23317 7.44984 7.33317C7.44984 5.43317 8.0665 3.8665 9.3165 2.6165C10.5665 1.3665 12.1332 0.716504 13.9998 0.666504ZM27.3332 30.6665C29.5433 30.6665 31.6629 29.7885 33.2257 28.2257C34.7885 26.6629 35.6665 24.5433 35.6665 22.3332C35.6665 20.123 34.7885 18.0034 33.2257 16.4406C31.6629 14.8778 29.5433 13.9998 27.3332 13.9998C25.123 13.9998 23.0034 14.8778 21.4406 16.4406C19.8778 18.0034 18.9998 20.123 18.9998 22.3332C18.9998 24.5433 19.8778 26.6629 21.4406 28.2257C23.0034 29.7885 25.123 30.6665 27.3332 30.6665ZM25.6665 17.3332H28.1665V22.0332L32.2332 24.3832L30.9832 26.5498L25.6665 23.4832V17.3332Z" fill="black"/>
</svg>
This process will take approximately 20 minutes
        </div>

        <input type="button" class="btn btn-lg form-btn my-3 form-btn-start" value="Start" id="submit" onclick="submitForm(document.getElementById('privacyFormOne').privacyQuestionOne, document.getElementById('privacyFormTwo').privacyQuestionTwo, document.getElementById('privacyFormThree').privacyQuestionThree);"></input>
      </div>
    </div>

    <script>
      const checkbox = document.getElementById('privacyCheckbox1');
      const startBtn = document.getElementById('submit');

      checkbox.addEventListener('change', (event) => {
        if (event.currentTarget.checked) {
          startBtn.style.display = "block";
        } else {
          startBtn.style.display = "none";
        }
      })

      function submitForm(checkObject1, checkObject2, checkObject3) {
        let selectedInput = null;

        let value1 = false;
        let value2 = false;
        let value3 = false;

        // if (checkObject1.checked) {
        //   value1 = checkObject1.value;
        // }
        // if (checkObject2.checked) {
        //   value2 = checkObject2.value;
        // }
        // if (checkObject3.checked) {
        //   value3 = checkObject3.value;
        // }

        // doesnt work currently, will fix later

        console.log(`value1 = ${value1}, value2 = ${value2}, value3 = ${value3}`);
        let hour = 1/24;
        setCookie('q1answer', value1, hour);
        setCookie('q2answer', value2, hour);
        setCookie('q3answer', value3, hour);

        window.location.href = "{{ '/alcohol-goals-and-plan/your-reasons-for-change/' | url }}";
      }

      function setCookie(cname, cvalue, exdays) {
        const d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        let expires = "expires="+ d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
      }
    </script>

  </section>
{% endblock %}
