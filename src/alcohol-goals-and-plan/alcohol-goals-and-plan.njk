{% extends "template.njk" %}

{% import "_pattern_macros/navigation_card.njk" as navcard %}
{% import "_pattern_macros/general_card.njk" as generalcard %}

{% set title = "Alcohol goals and plan" %}

{% block main %}

  <section class="breadcrumbs">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb my-2">
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Home</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Care, support and health</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Health and wellbeing</a></li>
          <li class="breadcrumb-item"><a href="{{ '/' | url }}">Healthy lifestyles</a></li>
          <li class="breadcrumb-item"><a href="{{ '/help-to-cut-back-on-your-drinking/' | url }}">Help to cut back on your drinking</a></li>
          <li class="breadcrumb-item active">Alcohol goals and plan</li>
        </ol>
      </nav>
    </div>
  </section>

  <section class="section_stage_theme">
    <div class="container">
      <h1 class="h2">Alcohol goals and plan</h1>
    </div>
  </section>

  <section>
    <div class="container">
      <div class="col-12 col-md-9">
        <h2 class="h3 mb-2">Privacy</h2>
        <p>Before you complete this form please read <a href="{{ '/' | url }}">Norfolk County Council privacy notice</a></p>
        <div class="form-check pb-4 pt-2" id="privacyFormOne">
          <input class="form-check-input" type="checkbox" name="privacyQuestionOne" value="privacyAnswer1" id="privacyCheckbox1">
          <label class="form-check-label" for="privacyCheckbox1">
            Tick to confirm that you have read our privacy notice
          </label>
        </div>
      
        <h2 class="h3 mb-2">Can you help us with our research?</h2>
        <p>We'd like to review your data and send you a follow-up survey after 4 weeks. Any data you share will only be reviewed by our design team.</p>
        <div class="form-check pt-2" id="privacyFormTwo">
          <input class="form-check-input" type="checkbox" name="privacyQuestionTwo" value="privacyAnswer2" id="privacyCheckbox2">
          <label class="form-check-label" for="privacyCheckbox2">
            If you are happy for us to collect data from this form, please tick this box.
          </label>
        </div>
        <div class="form-check pb-4 pt-2" id="privacyFormThree">
          <input class="form-check-input" type="checkbox" name="privacyQuestionThree" value="privacyAnswer3" id="privacyCheckbox3">
          <label class="form-check-label" for="privacyCheckbox3">
            If you would be happy to receive a survey, please tick this box
          </label>
        </div>
        <input type="button" class="btn  btn-lg form-btn my-3" value="Set goals and make an action plan" id="submit" onclick="submitForm(document.getElementById('privacyFormOne').privacyQuestionOne, document.getElementById('privacyFormTwo').privacyQuestionTwo, document.getElementById('privacyFormThree').privacyQuestionThree);"></input>
      </div>
    </div>

    <script>
      function submitForm(checkObject1, checkObject2, checkObject3) {
        let selectedInput = null;

        let value1 = false;
        let value2 = false;
        let value3 = false;

        // if (checkObject1.checked) {
        //   value1 = checkObject1.value;
        // }
        // if (checkObject2.checked) {
        //   value2 = checkObject2.value;
        // }
        // if (checkObject3.checked) {
        //   value3 = checkObject3.value;
        // }

        // doesnt work currently, will fix later

        console.log(`value1 = ${value1}, value2 = ${value2}, value3 = ${value3}`);
        let hour = 1/24;
        setCookie('q1answer', value1, hour);
        setCookie('q2answer', value2, hour);
        setCookie('q3answer', value3, hour);

        window.location.href = "{{ '/alcohol-goals-and-plan/your-reasons-for-change/' | url }}";
      }

      function setCookie(cname, cvalue, exdays) {
        const d = new Date();
        d.setTime(d.getTime() + (exdays*24*60*60*1000));
        let expires = "expires="+ d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
      }
    </script>

  </section>
{% endblock %}
