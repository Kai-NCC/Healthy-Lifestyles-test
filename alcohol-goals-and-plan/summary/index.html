<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/Healthy-Lifestyles-test/public/css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/default.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Mulish:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <title>Summary - NCC Healthy Lifestyles</title>
</head>


<body>
  
  

<header>

<div class="container">
    
    <div class="content-skip">
      <a href="#main" class="skip-to">Skip to content</a>
    </div>
    
    <div class="top-wrapper">

      <a class="navbar-brand" id="main-logo" href="/Healthy-Lifestyles-test/public/">
        <img src="/Healthy-Lifestyles-test/public/img/NCC-Logo.png" alt="NCC Logo">
      </a>
      
      <nav class="navbar" id="navbar-main">
        <ul class="navbar-nav mx-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Services
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="#">Action</a>
              <a class="dropdown-item" href="#">Another action</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Something else here</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#" role="button" aria-haspopup="true" aria-expanded="false">
                Sign in 
            </a>
          </li>
        </ul>
      </nav>
    
    </div>
    
    <div class="search-wrapper">
      <form class="form-inline d-flex main-search-area" action="/Healthy-Lifestyles-test/public/">
        <input class="form-control" type="search" placeholder="Find services and information" aria-label="Search">
        <button id="header-search-button" class="btn btn-outline-light d-inline-flex justify-content-between" type="submit"><svg width="14" height="14" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 0C8.22391 0 9.87721 0.684819 11.0962 1.90381C12.3152 3.12279 13 4.77609 13 6.5C13 8.11 12.41 9.59 11.44 10.73L11.71 11H12.5L17.5 16L16 17.5L11 12.5V11.71L10.73 11.44C9.59 12.41 8.11 13 6.5 13C4.77609 13 3.12279 12.3152 1.90381 11.0962C0.684819 9.87721 0 8.22391 0 6.5C0 4.77609 0.684819 3.12279 1.90381 1.90381C3.12279 0.684819 4.77609 0 6.5 0ZM6.5 2C4 2 2 4 2 6.5C2 9 4 11 6.5 11C9 11 11 9 11 6.5C11 4 9 2 6.5 2Z" fill="white"/></svg>Search</button>
      </form>
    </div>
  </div>

</header>
  <main id="main">
    

    

  <section class="breadcrumbs">
    <div class="container">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb my-2">
          <li class="breadcrumb-item"><a href="/Healthy-Lifestyles-test/public/">Home</a></li>
          <li class="breadcrumb-item"><a href="/Healthy-Lifestyles-test/public/">Care, support and health</a></li>
          <li class="breadcrumb-item"><a href="/Healthy-Lifestyles-test/public/">Health and wellbeing</a></li>
          <li class="breadcrumb-item"><a href="/Healthy-Lifestyles-test/public/">Healthy lifestyles</a></li>
          <li class="breadcrumb-item"><a href="/Healthy-Lifestyles-test/public/help-to-cut-back-on-your-drinking/">Help to cut back on your drinking</a></li>
          <li class="breadcrumb-item active">Alcohol goals and plan</li>
        </ol>
      </nav>
    </div>
  </section>

  <section class="section_stage_theme">
    <div class="container">
      <h1 class="h2">Alcohol goals and plan</h1>
    </div>
  </section>

  <section>
    <div class="container">
      <div class="col-12 col-md-9">
        <h2 class="h3 mb-2">Summary</h2>

        
        <h3 class="h4 mt-4">My reasons</h2>
        <div class="py-3" id="reasons-area-row">

        </div>

        <h3 class="h4">My goals and action plans</h2>
        <div class="py-3" id="goals-area-row">

        </div>

        <div class="double-btn-group">
          <input type="button" class="btn btn-lg form-btn form-btn-muted my-3 mx-2" value="Previous" id="submit" onclick="submitFormBack();"></input>
          <input type="button" class="btn btn-lg form-btn my-3 mx-2" value="Continue" id="submit" onclick="submitFormContinue();"></input>
        </div>
      </div>
    </div>

    <script>
      
      window.onload = function() {
        let parentElement = document.getElementById("selectedReasonsList");
        let parentElement2 = document.getElementById("selectedGoalsList");

        let reasons = getCookie('reasonsList');
        let goals = getCookie('goalsList');
        let reasonsArray = reasons.split(",");
        let goalsArray = goals.split(",");

        if (goals === '') {
          console.log(`cookies empty, returning`);
          alert(`You have not added any goals. Please go back to the previous page before continuing.`)
          return;
        }

        console.log(`cookie contents(reasons)= ${reasons}`);
        console.log(`cookie contents(goals)= ${goals}`);

        let reasonsParentDiv = document.getElementById("reasons-area-row");
        let reasonsSummary = document.createElement('ul');
        reasonsSummary.classList.add("reasons-summary-list");

        for (i = 0; i < reasonsArray.length; i++) {
          let newReason = document.createElement('li');
          newReason.innerHTML = reasonsArray[i];
          reasonsSummary.appendChild(newReason);
        }
        reasonsParentDiv.appendChild(reasonsSummary);

        let actionPlanString = getCookie('actionPlanObject');
        console.log(`actionPlanString = ${actionPlanString}`)
        let actionPlanObj =  JSON.parse(actionPlanString);

        console.log(actionPlanObj.goals[0].when);

        let goalsParentDiv = document.getElementById("goals-area-row");
        let goalSummary = document.createElement('ul');
        goalSummary.classList.add("goal-summary-list");

        for (i = 0; i < actionPlanObj.goals.length; i++) {
          let newGoal = document.createElement('li');
          newGoal.classList.add("goal-summary-header");
          newGoal.innerHTML = `
            ${actionPlanObj.goals[i].goal}
            <ul>
              <li><strong>When:</strong> ${actionPlanObj.goals[i].when}</li>
              <li><strong>Where:</strong> ${actionPlanObj.goals[i].where}</li>
              <li><strong>What:</strong> ${actionPlanObj.goals[i].what}</li>
            </ul>
          `;
          goalSummary.appendChild(newGoal);
        }
        goalsParentDiv.appendChild(goalSummary);
      }

      function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for(let i = 0; i <ca.length; i++) {
          let c = ca[i];
          while (c.charAt(0) == ' ') {
            c = c.substring(1);
          }
          if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
          }
        }
        return "";
      }

      function selectBtnOption(btnID) {
        let button = document.getElementById(btnID);
        button.classList.toggle("selected");
  
        if (btnID == "reason9") {
          x = document.getElementById("own-reason-area");

          if (x.style.display === "block") {
            x.style.display = "none";
          } else {
            x.style.display = "block";
          }
        }
      }

      function addCustomText(text) {
        console.log(`custom text= ${text}`);
        addReasonDiv(text);
      }

      function addCustomOption(text) {
        let ownGoalTextArea = document.getElementById("ownGoal");

        if (ownGoalTextArea.value === "") {
          console.log("reasons empty, returning");
          ownGoalTextArea.classList.add("error");
          return;
        }
        ownGoalTextArea.classList.remove("error");

        let parentElement = document.getElementById("goalsList");
        let divWrapper = document.createElement('div');
        let input = document.createElement('input');
        let label = document.createElement('label');
        
        divWrapper.classList.add("form-check");
        divWrapper.classList.add("reasons-checkbox");
        divWrapper.classList.add("custom-reason-checkbox");

        input.classList.add("form-check-input");
        input.classList.add("reasons-input");
        input.name = "goalOption";
        input.type = "checkbox";
        input.value = "goalsCustomX";
        input.id = "goalsCustomX";
        input.checked = true;

        label.classList.add("form-check-label");       
        label.htmlFor = "goalsCustomX";       
        label.innerHTML = text;       

        parentElement.appendChild(divWrapper);
        divWrapper.appendChild(input);
        divWrapper.appendChild(label);

        ownGoalTextArea.value = "";
      }

      function addReasonDiv(text) {
        let parentElement = document.getElementById("goals-area-row");
        let column = document.createElement('div');
        let newElement = document.createElement('div');

        column.classList.add("col-12");
        column.classList.add("col-md-5");
        newElement.classList.add("interactive-text-box");
        newElement.innerHTML = text;
        
        parentElement.appendChild(column);
        column.appendChild(newElement);
      }
      function addGoalDivWithPlan(text) {
        /* encodedID = btoa(text);

        console.log(`encoded text = ${encodedID}`) */

        encodedID = btoa(unescape(encodeURIComponent(text)));

        let parentElement = document.getElementById("goals-area-row");
        let column = document.createElement('div');
        let newElement = document.createElement('div');
        let newButtonAdd = document.createElement('button');
        let newButtonClear = document.createElement('button');

        column.classList.add("col-12");
        column.classList.add("col-md-5");
        newElement.classList.add("interactive-text-box");
        newElement.innerHTML = text;
        newElement.id = `actionbox-${encodedID}`;
        
        newButtonAdd.classList.add("btn");
        newButtonAdd.classList.add("btn-success");
        newButtonAdd.classList.add("btn-lg");
        newButtonAdd.classList.add("action-plan-btn");
        newButtonAdd.id = `actionplanbtn-${encodedID}`;
        newButtonAdd.onclick = function() { addActionPlan(newButtonAdd.id); };
        newButtonAdd.type = "button";
        newButtonAdd.innerHTML = "Add action plan";

        newButtonClear.classList.add("btn");
        newButtonClear.classList.add("btn-danger");
        newButtonClear.classList.add("btn-lg");
        newButtonClear.classList.add("action-plan-btn");
        newButtonClear.classList.add("action-plan-btn-clear");
        newButtonClear.id = `actionplanbtn-clear-${encodedID}`;
        newButtonClear.onclick = function() { clearActionPlan(newButtonClear.id); };
        newButtonClear.type = "button";
        newButtonClear.innerHTML = "Clear action plan";


        parentElement.appendChild(column);
        column.appendChild(newElement);
        createActionPlanDiv(column, `actionbox-${encodedID}-input`);
        column.appendChild(newButtonAdd);
        column.appendChild(newButtonClear);
      }

      function clearItems() {
        let parentElement = document.getElementById("goals-area-row");
        let children = parentElement.childNodes;

        while (children.length > 2) {
          let child = parentElement.lastElementChild;
          console.log(`child id= ${child.id}`);
          if (child.id != "addGoalsDiv")
            parentElement.removeChild(child);
          else break;
        }
      }

      function addActionPlan(btn) {
        const idString = btn.split("-");
        let button = document.getElementById(btn);
        let editButton = document.getElementById(`actionplanbtn-clear-${idString[1]}`);
        let actionBox = document.getElementById(`actionbox-${idString[1]}`);

        let inputField1 = document.getElementById(`actionbox-${idString[1]}-input-1`);
        let inputField2 = document.getElementById(`actionbox-${idString[1]}-input-2`);
        let inputField3 = document.getElementById(`actionbox-${idString[1]}-input-3`);

        if (!editButton.classList.contains("action-plan-btn-clear-show")) {
          editButton.classList.add("action-plan-btn-clear-show");
        }

        if (actionBox.classList.contains("actionbox-active")) {
          actionBox.classList.remove("actionbox-active");
          actionBox.classList.add("actionbox-saved");
          actionBox.nextElementSibling.classList.remove("actionbox-active");
          actionBox.nextElementSibling.classList.add("actionbox-saved");
          button.innerHTML = "Edit action plan";
          inputField1.disabled = true;
          inputField2.disabled = true;
          inputField3.disabled = true;
        } else {
          actionBox.classList.add("actionbox-active");
          actionBox.classList.remove("actionbox-saved");
          actionBox.nextElementSibling.classList.add("actionbox-active");
          actionBox.nextElementSibling.classList.remove("actionbox-saved");
          button.innerHTML = "Save action plan";
          inputField1.disabled = false;
          inputField2.disabled = false;
          inputField3.disabled = false;
        }
      }

      function clearActionPlan(btn) {
        const idString = btn.split("-");

        let inputField1 = document.getElementById(`actionbox-${idString[2]}-input-1`);
        let inputField2 = document.getElementById(`actionbox-${idString[2]}-input-2`);
        let inputField3 = document.getElementById(`actionbox-${idString[2]}-input-3`);

        inputField1.value = "";
        inputField2.value = "";
        inputField3.value = "";
      }

      function submitFormConfirm(checkboxObject) {

        clearItems();

        let selectedChoices = null;

        for (var i = 0; i < checkboxObject.length; i++) {
          console.log(`checkbox ${i} = ${checkboxObject[i].checked}`);
          if (checkboxObject[i].checked) {
            let reasonText = checkboxObject[i].nextElementSibling.innerHTML;
            console.log(`sibling text=${reasonText}`);
            addReasonDiv(reasonText);
          }
        }
      }

      function createActionPlanDiv(parentColumn, inputID) {
        let actionPlanDiv = document.createElement('div');
        actionPlanDiv.classList.add("action-plan-area");
        actionPlanDiv.innerHTML = `
          <h4>Action plan</h4>
          <h5 class="h6">When</h5>
          <input id="${inputID}-1" class="form-control form-text mb-3" type="text" placeholder="For example, Saturday night" aria-label="Action plan - when">
          <h5 class="h6">Where (setting or environment)</h5>
          <input id="${inputID}-2" class="form-control form-text mb-3" type="text" placeholder="For example, at home" aria-label="Action plan - where">
          <h5 class="h6">What</h5>
          <input id="${inputID}-3" class="form-control form-text mb-3" type="text" placeholder="For example, drinking non-alcohol" aria-label="Action plan - what">
        `;
        parentColumn.appendChild(actionPlanDiv);
      }

      function submitFormContinue(goals) {
        window.location.href = "/Healthy-Lifestyles-test/public/alcohol-goals-and-plan/keep-a-reminder";
      }

      function submitFormBack() {
        window.location.href = "/Healthy-Lifestyles-test/public/alcohol-goals-and-plan/making-a-plan";
      }

    </script>

  </section>

  </main>
  <footer>
  <div class="container py-5">
    <div class="row py-3">
      <div class="col-12 col-lg-8">
        <h2 class="h4 footer-heading">Services</h2>
        <hr>
        <div class="row">
          <div class="col-12 col-sm-12 col-lg-6">
            <ul class="footer-list">
              <li><a href="#">Accessibility statement</a></li>
              <li><a href="#">Business</a></li>
              <li><a href="#">Children and families</a></li>
              <li><a href="#">Jobs, training and volunteering</a></li>
              <li><a href="#">Out and about in Norfolk</a></li>
              <li><a href="#">Rubbish, recycling and planning</a></li>
              <li><a href="#">What we do and how we work</a></li>
            </ul>
          </div>
          <div class="col-12 col-sm-12 col-lg-6">
            <ul class="footer-list">
              <li><a href="#">Births, ceremonies and deaths</a></li>
              <li><a href="#">Care, support and health</a></li>
              <li><a href="#">Education and learning</a></li>
              <li><a href="#">Libraries, local history and archives</a></li>
              <li><a href="#">Roads and transport</a></li>
              <li><a href="#">Safety</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-12 col-lg-4">
        <h2 class="h4 footer-heading">Connect</h2>
        <hr>
        <ul class="footer-list social-media-links">
          <li><a href="#">
            <div class="social-logo facebook-logo"><svg class="facebook-logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 48 48" id="Layer_1" version="1.1" viewBox="0 0 48 48" xml:space="preserve"><circle cx="24" cy="24" fill="#4E71A8" r="24"/><path d="M29.9,19.5h-4v-2.6c0-1,0.7-1.2,1.1-1.2c0.5,0,2.8,0,2.8,0v-4.4l-3.9,0c-4.4,0-5.3,3.3-5.3,5.3v2.9h-2.5V24  h2.5c0,5.8,0,12.7,0,12.7h5.3c0,0,0-7,0-12.7h3.6L29.9,19.5z" fill="#FFFFFF"/></svg></div>
            Facebook</a></li>
          <li><a href="#"><div class="social-logo twitter-logo"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 48 48" id="Layer_1" version="1.1" viewBox="0 0 48 48" xml:space="preserve"><circle cx="24" cy="24" fill="#1CB7EB" r="24"/><g><g><path d="M36.8,15.4c-0.9,0.5-2,0.8-3,0.9c1.1-0.7,1.9-1.8,2.3-3.1c-1,0.6-2.1,1.1-3.4,1.4c-1-1.1-2.3-1.8-3.8-1.8    c-2.9,0-5.3,2.5-5.3,5.7c0,0.4,0,0.9,0.1,1.3c-4.4-0.2-8.3-2.5-10.9-5.9c-0.5,0.8-0.7,1.8-0.7,2.9c0,2,0.9,3.7,2.3,4.7    c-0.9,0-1.7-0.3-2.4-0.7c0,0,0,0.1,0,0.1c0,2.7,1.8,5,4.2,5.6c-0.4,0.1-0.9,0.2-1.4,0.2c-0.3,0-0.7,0-1-0.1    c0.7,2.3,2.6,3.9,4.9,3.9c-1.8,1.5-4.1,2.4-6.5,2.4c-0.4,0-0.8,0-1.3-0.1c2.3,1.6,5.1,2.6,8.1,2.6c9.7,0,15-8.6,15-16.1    c0-0.2,0-0.5,0-0.7C35.2,17.6,36.1,16.6,36.8,15.4z" fill="#FFFFFF"/></g></g></svg></div>Twitter</a></li>
        </ul>
      </div>
    </div>
    <div class="row py-3">
      <div class="col-12">
        <hr>
        <ul class="footer-list footer-bottom-links py-3">
          <li><a href="#">Contact Norfolk County Council</a></li>
          <li><a href="#">Site Map</a></li>
          <li><a href="#">Disclaimer</a></li>
          <li><a href="#">Privacy and cookies</a></li>
          <li><a href="#">Accessibility</a></li>
        </ul>
        <div class="copyright-wrapper">
          <p>&copy; 2015-2018 Norfolk County Council</p>
        </div>
      </div>
    </div>
  </div>
</footer>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>

</body>
</html>
